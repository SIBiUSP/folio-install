apiVersion: apps/v1beta2
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "7"
    field.cattle.io/creatorId: u-foo
    field.cattle.io/publicEndpoints: '[{"addresses":["XX.XX.XXX.XXX"],"port":443,"protocol":"HTTPS","serviceName":"folio-q4:okapi","ingressName":"folio-q4:okapi","hostname":"folio-okapiq4.org","allNodes":true},{"addresses":["XX.XX.XXX.XXX"],"port":443,"protocol":"HTTPS","serviceName":"folio-q4:okapi","ingressName":"folio-q4:okapi","hostname":"folio-okapiq4.org","path":"/","allNodes":true},{"addresses":["XX.XX.XXX.XXX"],"port":443,"protocol":"HTTPS","serviceName":"folio-q4:okapi","ingressName":"folio-q4:okapi","hostname":"folio-okapiq4.org","path":"/_/","allNodes":true}]'
  creationTimestamp: null
  generation: 1
  labels:
    cattle.io/creator: norman
    workload.user.cattle.io/workloadselector: deployment-folio-q4-okapi
  name: okapi
  selfLink: /apis/apps/v1beta2/namespaces/folio-q4/deployments/okapi
spec:
  minReadySeconds: 5
  progressDeadlineSeconds: 120
  replicas: 3
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      workload.user.cattle.io/workloadselector: deployment-folio-q4-okapi
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  template:
    metadata:
      annotations:
        cattle.io/timestamp:
        field.cattle.io/ports: '[[{"containerPort":9130,"dnsName":"okapi","kind":"ClusterIP","name":"9130tcp02","protocol":"TCP","sourcePort":0},{"containerPort":5701,"dnsName":"okapi","kind":"ClusterIP","name":"5701tcp02","protocol":"TCP","sourcePort":0},{"containerPort":5702,"dnsName":"okapi","kind":"ClusterIP","name":"5702tcp02","protocol":"TCP","sourcePort":0},{"containerPort":5703,"dnsName":"okapi","kind":"ClusterIP","name":"5703tcp02","protocol":"TCP","sourcePort":0},{"containerPort":54327,"dnsName":"okapi","kind":"ClusterIP","name":"54327udp02","protocol":"UDP","sourcePort":0},{"containerPort":5704,"dnsName":"okapi","kind":"ClusterIP","name":"5704tcp02","protocol":"TCP","sourcePort":0}]]'
      creationTimestamp: null
      labels:
        workload: folio_module
        workload.user.cattle.io/workloadselector: deployment-folio-q4-okapi
    spec:
      containers:
      - env:
        - name: HAZELCAST_IP
          value: XX.XX.XXX.XXX
        - name: HAZELCAST_PORT
          value: "5701"
        - name: HAZELCAST_VERTX_PORT
          value: "5702"
        - name: INITDB
          value: "false"
        - name: OKAPI_CLUSTERHOST
          value: XX.XX.XXX.XXX
        - name: OKAPI_HOST
          value: okapi
        - name: OKAPI_LOGLEVEL
          value: INFO
        - name: OKAPI_PORT
          value: "9130"
        - name: OKAPI_URL
          value: http://okapi:9130
        - name: PG_HOST
          value: pg-folio
        image: 10.55.134.48/folio/okapi:q4
        imagePullPolicy: Always
        livenessProbe:
          failureThreshold: 2
          httpGet:
            path: /_/proxy/health
            port: 9130
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 15
          successThreshold: 1
          timeoutSeconds: 5
        name: okapi
        ports:
        - containerPort: 9130
          name: 9130tcp02
          protocol: TCP
        - containerPort: 5701
          name: 5701tcp02
          protocol: TCP
        - containerPort: 5702
          name: 5702tcp02
          protocol: TCP
        - containerPort: 5703
          name: 5703tcp02
          protocol: TCP
        - containerPort: 54327
          name: 54327udp02
          protocol: UDP
        - containerPort: 5704
          name: 5704tcp02
          protocol: TCP
        readinessProbe:
          failureThreshold: 2
          httpGet:
            path: /_/proxy/health
            port: 9130
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 15
          successThreshold: 1
          timeoutSeconds: 5
        resources: {}
        securityContext:
          allowPrivilegeEscalation: false
          capabilities: {}
          privileged: false
          readOnlyRootFilesystem: false
          runAsNonRoot: false
        stdin: true
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        tty: true
      dnsPolicy: ClusterFirst
      imagePullSecrets:
      - name: vic-teague
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30
status: {}
